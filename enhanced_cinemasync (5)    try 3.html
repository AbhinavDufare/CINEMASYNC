<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CinemaSync - Watch Together, Apart</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #2d1810 0%, #1a0e0a 30%, #0f0507 70%, #1a1216 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 140, 105, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 182, 135, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 107, 107, 0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffd4a3;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle 4s infinite;
            filter: blur(0.5px);
        }

        .star:nth-child(odd) {
            background: #ffb88c;
        }

        .star:nth-child(3n) {
            background: #ffd93d;
            filter: blur(1px);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            25% { opacity: 0.6; transform: scale(1.1); }
            50% { opacity: 1; transform: scale(1.2); }
            75% { opacity: 0.8; transform: scale(1.1); }
        }

        /* Enhanced Intro Styles */
        .intro-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            background: linear-gradient(135deg, #2d1810 0%, #1a0e0a 30%, #0f0507 70%, #1a1216 100%);
            transition: all 1.5s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .intro-page.fade-out {
            opacity: 0;
            transform: scale(1.1) translateY(-20px);
        }

        .intro-page.hidden {
            display: none;
        }

        .intro-logo {
            font-size: 5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff8a65, #ffd54f, #ffab91, #ff7043, #ffcc80);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 4s ease-in-out infinite, logoFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 0 40px rgba(255, 138, 101, 0.6));
            text-align: center;
            letter-spacing: -3px;
            margin-bottom: 30px;
            position: relative;
        }

        .intro-logo::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shine 2s ease-in-out infinite;
            pointer-events: none;
        }

        .intro-tagline {
            font-size: 1.6rem;
            color: #e8c5a0;
            text-align: center;
            margin-bottom: 80px;
            opacity: 0;
            animation: fadeInUp 1.2s ease-out 0.8s forwards;
            font-weight: 300;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(255, 138, 101, 0.3);
        }

        .intro-progress-bar {
            width: 300px;
            height: 3px;
            background: rgba(255, 138, 101, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .intro-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8a65, #ffd54f);
            border-radius: 2px;
            width: 0%;
            animation: progressFill 4s ease-out forwards;
            box-shadow: 0 0 20px rgba(255, 138, 101, 0.5);
        }

        .loading-text {
            color: #d4b896;
            font-size: 0.9rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            opacity: 0;
            animation: fadeInUp 1s ease-out 1.5s forwards;
        }

        .skip-intro-btn {
            position: absolute;
            bottom: 50px;
            right: 50px;
            background: rgba(255, 138, 101, 0.15);
            border: 1px solid rgba(255, 138, 101, 0.4);
            color: #f5e6d3;
            padding: 12px 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 0.9rem;
            opacity: 0;
            animation: fadeInUp 1s ease-out 2.5s forwards;
            backdrop-filter: blur(10px);
        }

        .skip-intro-btn:hover {
            background: rgba(255, 138, 101, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 138, 101, 0.2);
        }

        /* Enhanced cinema elements */
        .intro-cinema-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-emojis {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .floating-emoji {
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            animation: floatEmoji 8s ease-in-out infinite;
        }

        .floating-emoji:nth-child(odd) {
            animation-delay: -2s;
        }

        .floating-emoji:nth-child(3n) {
            animation-delay: -4s;
        }

        @keyframes floatEmoji {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10%, 90% { opacity: 0.1; }
            50% { transform: translateY(-10vh) rotate(180deg); opacity: 0.2; }
        }

        /* Enhanced animations */
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-10px) scale(1.02); }
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            50%, 100% { transform: translateX(100%); }
        }

        @keyframes progressFill {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Main App Styles */
        .main-app {
            opacity: 0;
            transform: scale(0.95);
            transition: all 1.5s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .main-app.show {
            opacity: 1;
            transform: scale(1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        /* Enhanced Toast System */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            max-width: 400px;
        }

        .toast {
            background: rgba(61, 28, 15, 0.95);
            border-radius: 15px;
            padding: 16px 20px;
            margin-bottom: 12px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 138, 101, 0.3);
            transform: translateX(450px);
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            animation: slideIn 0.4s ease forwards;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .toast::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #ff8a65, #ffd54f);
        }

        .toast.success::before { background: linear-gradient(90deg, #4caf50, #81c784); }
        .toast.error::before { background: linear-gradient(90deg, #f44336, #ef5350); }
        .toast.info::before { background: linear-gradient(90deg, #2196f3, #42a5f5); }

        .toast-content {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toast-icon {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .toast-text {
            flex: 1;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            color: #d4b896;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0;
            margin-left: 8px;
            transition: color 0.3s ease;
        }

        .toast-close:hover {
            color: #fff;
        }

        @keyframes slideIn {
            to { transform: translateX(0); }
        }

        /* Enhanced Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-form {
            background: rgba(61, 28, 15, 0.95);
            border-radius: 25px;
            padding: 45px;
            width: 100%;
            max-width: 480px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 138, 101, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transform: translateY(30px) scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .auth-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 138, 101, 0.05), rgba(255, 213, 79, 0.02));
            pointer-events: none;
        }

        .auth-modal.active .auth-form {
            transform: translateY(0) scale(1);
        }

        .auth-header h2 {
            font-size: 2rem;
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            -webkit-background-clip: text;
            background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-align: center;
        }

        .auth-header p {
            color: #d4b896;
            font-size: 1rem;
            text-align: center;
            margin-bottom: 35px;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #f5e6d3;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: 15px 18px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 138, 101, 0.15);
            color: #f5e6d3;
            outline: none;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 138, 101, 0.3);
            font-size: 1rem;
        }

        .form-input:focus {
            background: rgba(255, 138, 101, 0.2);
            box-shadow: 0 0 20px rgba(255, 138, 101, 0.3);
            border-color: rgba(255, 138, 101, 0.6);
            transform: translateY(-1px);
        }

        .form-input::placeholder {
            color: #d4b896;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            font-size: 0.95rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            color: #5d2e1a;
            box-shadow: 0 8px 25px rgba(255, 138, 101, 0.4);
            width: 100%;
            padding: 18px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .btn-secondary {
            background: rgba(255, 138, 101, 0.15);
            color: #f5e6d3;
            border: 2px solid rgba(255, 138, 101, 0.3);
            backdrop-filter: blur(10px);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
        }

        .btn-primary:hover:not(:disabled) {
            box-shadow: 0 15px 35px rgba(255, 138, 101, 0.5);
        }

        .btn-secondary:hover:not(:disabled) {
            background: rgba(255, 138, 101, 0.25);
            border-color: rgba(255, 138, 101, 0.5);
        }

        /* Enhanced User Interface */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 50px;
            animation: fadeInDown 1s ease-out;
        }

        .logo {
            font-size: 3.2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff8a65, #ffd54f, #ffab91);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 12px;
            filter: drop-shadow(0 0 25px rgba(255, 138, 101, 0.4));
            animation: logoGlow 3s ease-in-out infinite;
        }

        .tagline {
            font-size: 1.3rem;
            color: #e8c5a0;
            margin-bottom: 35px;
            filter: drop-shadow(0 0 15px rgba(255, 138, 101, 0.2));
            font-weight: 300;
            letter-spacing: 1px;
        }

        @keyframes logoGlow {
            0%, 100% { filter: drop-shadow(0 0 25px rgba(255, 138, 101, 0.4)); }
            50% { filter: drop-shadow(0 0 35px rgba(255, 138, 101, 0.7)); }
        }

        /* Enhanced Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 14px 28px;
            background: rgba(255, 138, 101, 0.15);
            border: none;
            border-radius: 30px;
            color: #f5e6d3;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            backdrop-filter: blur(20px);
            font-size: 0.95rem;
            font-weight: 500;
            border: 2px solid rgba(255, 138, 101, 0.2);
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab:hover {
            background: rgba(255, 138, 101, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 138, 101, 0.2);
            border-color: rgba(255, 138, 101, 0.4);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            color: #5d2e1a;
            box-shadow: 0 10px 30px rgba(255, 138, 101, 0.4);
            border-color: transparent;
        }

        /* Enhanced Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.6s ease-in;
        }

        .content-section.active {
            display: block;
        }

        .hero-section {
            text-align: center;
            margin-bottom: 60px;
            padding: 50px 0;
        }

        .hero-title {
            font-size: 2.8rem;
            background: linear-gradient(45deg, #fff, #ffd54f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 25px;
            line-height: 1.2;
            font-weight: 700;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #d4b896;
            line-height: 1.7;
            max-width: 650px;
            margin: 0 auto;
            font-weight: 300;
        }

        /* Enhanced Feature Cards */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 35px;
            margin: 50px 0;
        }

        .feature-card {
            background: rgba(255, 138, 101, 0.08);
            border-radius: 25px;
            padding: 35px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 138, 101, 0.15);
            transition: all 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, rgba(255, 138, 101, 0.3), rgba(255, 213, 79, 0.2), rgba(255, 138, 101, 0.3));
            border-radius: 25px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 25px 50px rgba(255, 138, 101, 0.2);
        }

        .feature-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 0 10px rgba(255, 138, 101, 0.3));
        }

        .feature-title {
            color: #fff;
            margin-bottom: 18px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .feature-description {
            color: #d4b896;
            line-height: 1.7;
            font-size: 1rem;
        }

        /* Enhanced Room Interface */
        .room-interface {
            background: rgba(255, 138, 101, 0.08);
            border-radius: 25px;
            padding: 35px;
            margin: 25px 0;
            border: 1px solid rgba(255, 138, 101, 0.15);
            backdrop-filter: blur(20px);
        }

        .video-container {
            background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
            border-radius: 15px;
            height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 138, 101, 0.2);
        }

        .video-placeholder {
            color: #888;
            font-size: 1.3rem;
            text-align: center;
            padding: 20px;
        }

        .video-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            flex-wrap: wrap;
            justify-content: center;
        }

        .control-btn {
            background: rgba(255, 138, 101, 0.2);
            border: 2px solid rgba(255, 138, 101, 0.3);
            color: #fff;
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .control-btn:hover {
            background: rgba(255, 138, 101, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 138, 101, 0.2);
        }

        .control-btn.active {
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            color: #5d2e1a;
            border-color: transparent;
        }

        /* Enhanced Chat */
        .chat-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            height: 250px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255, 138, 101, 0.2);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 138, 101, 0.5) transparent;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 138, 101, 0.5);
            border-radius: 3px;
        }

        .chat-input-container {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid rgba(255, 138, 101, 0.2);
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 138, 101, 0.15);
            border: 2px solid rgba(255, 138, 101, 0.3);
            border-radius: 12px;
            padding: 10px 15px;
            color: #fff;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: rgba(255, 138, 101, 0.6);
            box-shadow: 0 0 15px rgba(255, 138, 101, 0.2);
        }

        .chat-input::placeholder {
            color: #d4b896;
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 18px;
            height: 18px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Enhanced Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Room Management */
        .room-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .room-card {
            background: rgba(255, 138, 101, 0.08);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 138, 101, 0.15);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .room-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(255, 138, 101, 0.15);
            border-color: rgba(255, 138, 101, 0.3);
        }

        .room-card h3 {
            color: #fff;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .room-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #d4b896;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .room-participants {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .participant-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: #5d2e1a;
            position: relative;
        }

        .participant-avatar.online::after {
            content: '';
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 10px;
            height: 10px;
            background: #4caf50;
            border-radius: 50%;
            border: 2px solid #2d1810;
        }

        /* Movie Selection */
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .movie-card {
            background: rgba(255, 138, 101, 0.08);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 138, 101, 0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 138, 101, 0.15);
        }

        .movie-poster {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #333, #555);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #666;
        }

        .movie-title {
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .movie-info {
            color: #d4b896;
            font-size: 0.8rem;
        }

        /* Enhanced Platform Cards */
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .platform-card {
            background: rgba(255, 138, 101, 0.08);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 138, 101, 0.15);
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .platform-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: left 0.6s ease;
        }

        .platform-card:hover::before {
            left: 100%;
        }

        .platform-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(255, 138, 101, 0.15);
            border-color: rgba(255, 138, 101, 0.3);
        }

        .platform-logo {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .netflix { background: linear-gradient(45deg, #E50914, #B81D1D); }
        .disney { background: linear-gradient(45deg, #113CCF, #1E3A8A); }
        .hulu { background: linear-gradient(45deg, #1CE783, #16A085); }
        .amazon { background: linear-gradient(45deg, #00A8CC, #0891B2); }
        .hbo { background: linear-gradient(45deg, #8B5CF6, #7C3AED); }
        .youtube { background: linear-gradient(45deg, #FF0000, #DC2626); }

        .platform-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 10px;
        }

        .platform-status {
            font-size: 1rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .status-connected {
            color: #4CAF50;
        }

        .status-disconnected {
            color: #FF7043;
        }

        /* Enhanced User Menu */
        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            color: #5d2e1a;
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid rgba(255, 138, 101, 0.3);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 138, 101, 0.4);
            border-color: rgba(255, 138, 101, 0.6);
        }

        .user-dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: rgba(61, 28, 15, 0.95);
            border-radius: 20px;
            padding: 25px;
            min-width: 250px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 138, 101, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-15px);
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            z-index: 1001;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .user-info {
            border-bottom: 1px solid rgba(255, 138, 101, 0.2);
            padding-bottom: 18px;
            margin-bottom: 18px;
        }

        .user-info h4 {
            color: #fff;
            margin-bottom: 8px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .user-info p {
            color: #d4b896;
            font-size: 0.9rem;
        }

        .user-status {
            font-size: 0.8rem;
            color: #4caf50;
            margin-top: 5px;
            font-weight: 500;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            padding: 10px 0;
            background: none;
            border: none;
            color: #d4b896;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            border-radius: 8px;
        }

        .dropdown-item:hover {
            color: #fff;
            background: rgba(255, 138, 101, 0.1);
            padding-left: 8px;
        }

        /* Notification System */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(45deg, #ff4444, #ff6666);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Movie Search */
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto 40px auto;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid rgba(255, 138, 101, 0.3);
            border-radius: 30px;
            background: rgba(255, 138, 101, 0.1);
            color: #fff;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: rgba(255, 138, 101, 0.6);
            box-shadow: 0 0 25px rgba(255, 138, 101, 0.2);
            background: rgba(255, 138, 101, 0.15);
        }

        .search-input::placeholder {
            color: #d4b896;
        }

        .search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(45deg, #ff8a65, #ffd54f);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 5px 15px rgba(255, 138, 101, 0.3);
        }

        /* Enhanced Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(61, 28, 15, 0.95);
            border-radius: 25px;
            padding: 40px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 138, 101, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transform: scale(0.95);
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 25px;
            background: none;
            border: none;
            color: #d4b896;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-btn:hover {
            color: #fff;
            background: rgba(255, 138, 101, 0.2);
            transform: scale(1.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .intro-logo {
                font-size: 3.5rem;
            }
            
            .intro-tagline {
                font-size: 1.3rem;
            }

            .skip-intro-btn {
                bottom: 30px;
                right: 30px;
                padding: 10px 20px;
            }

            .header {
                flex-direction: column;
                gap: 25px;
                text-align: center;
            }

            .auth-form, .modal-content {
                margin: 20px;
                padding: 35px 25px;
            }

            .hero-title {
                font-size: 2.2rem;
            }

            .logo {
                font-size: 2.8rem;
            }

            .feature-grid, .platform-grid, .movie-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .nav-tabs {
                gap: 15px;
            }

            .nav-tab {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .video-controls {
                gap: 10px;
            }

            .control-btn {
                padding: 10px 15px;
                font-size: 0.8rem;
            }

            .user-dropdown {
                right: -10px;
                min-width: 220px;
            }
        }

        @media (max-width: 480px) {
            .intro-logo {
                font-size: 2.8rem;
            }
            
            .intro-tagline {
                font-size: 1.1rem;
            }

            .container {
                padding: 15px;
            }

            .hero-subtitle {
                font-size: 1rem;
            }

            .feature-card, .platform-card, .room-card {
                padding: 25px 20px;
            }

            .search-input {
                padding: 12px 45px 12px 18px;
            }

            .toast {
                margin: 0 15px 10px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Intro Page -->
    <div class="intro-page" id="introPage">
        <div class="intro-cinema-elements">
            <div class="floating-emojis" id="floatingEmojis"></div>
        </div>
        
        <div class="intro-logo">CinemaSync</div>
        <div class="intro-tagline">Watch Together, Apart</div>
        
        <div class="intro-progress-bar">
            <div class="intro-progress-fill"></div>
        </div>
        
        <div class="loading-text">Creating Magic</div>
        
        <button class="skip-intro-btn" onclick="skipIntro()">Skip Intro ‚Üí</button>
    </div>

    <!-- Main App -->
    <div class="main-app" id="mainApp">
        <div class="stars" id="stars"></div>
        
        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>
        
        <!-- Authentication Modal -->
        <div class="auth-modal modal" id="authModal">
            <div class="auth-form modal-content">
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
                
                <!-- Login Form -->
                <div id="loginForm" class="auth-content">
                    <div class="auth-header">
                        <h2>Welcome Back</h2>
                        <p>Sign in to continue your cinematic journey</p>
                    </div>
                    
                    <div id="loginMessage"></div>
                    
                    <form onsubmit="handleLogin(event)" id="loginFormElement">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input 
                                type="email" 
                                class="form-input" 
                                id="loginEmail" 
                                placeholder="Enter your email" 
                                required
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input 
                                type="password" 
                                class="form-input" 
                                id="loginPassword" 
                                placeholder="Enter your password" 
                                required
                            >
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="loginBtn">
                            Sign In
                        </button>
                    </form>
                    
                    <div class="auth-switch">
                        <p style="color: #d4b896; margin: 20px 0 15px 0; text-align: center;">Don't have an account?</p>
                        <button type="button" class="btn btn-secondary" style="width: 100%;" onclick="switchToRegister()">Create Account</button>
                    </div>
                </div>
                
                <!-- Register Form -->
                <div id="registerForm" class="auth-content" style="display: none;">
                    <div class="auth-header">
                        <h2>Join CinemaSync</h2>
                        <p>Create your account to start watching together</p>
                    </div>
                    
                    <div id="registerMessage"></div>
                    
                    <form onsubmit="handleRegister(event)" id="registerFormElement">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="registerName" 
                                placeholder="Enter your full name" 
                                required
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input 
                                type="email" 
                                class="form-input" 
                                id="registerEmail" 
                                placeholder="Enter your email" 
                                required
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input 
                                type="password" 
                                class="form-input" 
                                id="registerPassword" 
                                placeholder="Create a strong password" 
                                required
                            >
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="registerBtn">
                            Create Account
                        </button>
                    </form>
                    
                    <div class="auth-switch">
                        <p style="color: #d4b896; margin: 20px 0 15px 0; text-align: center;">Already have an account?</p>
                        <button type="button" class="btn btn-secondary" style="width: 100%;" onclick="switchToLogin()">Sign In</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Room Modal -->
        <div class="modal" id="createRoomModal">
            <div class="modal-content">
                <button class="close-btn" onclick="closeModal('createRoomModal')">&times;</button>
                
                <div class="auth-header">
                    <h2>Create Movie Room</h2>
                    <p>Set up your private movie watching experience</p>
                </div>
                
                <form onsubmit="handleCreateRoom(event)">
                    <div class="form-group">
                        <label class="form-label">Room Name</label>
                        <input 
                            type="text" 
                            class="form-input" 
                            id="roomName" 
                            placeholder="e.g., Date Night with Sarah" 
                            required
                        >
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Maximum Participants</label>
                        <select class="form-input" id="maxParticipants">
                            <option value="2">2 people (intimate)</option>
                            <option value="4">4 people (small group)</option>
                            <option value="8">8 people (family/friends)</option>
                            <option value="16">16 people (party)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Room Privacy</label>
                        <select class="form-input" id="roomPrivacy">
                            <option value="private">Private (invite only)</option>
                            <option value="friends">Friends only</option>
                            <option value="public">Public (anyone can join)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        üöÄ Create Room
                    </button>
                </form>
            </div>
        </div>

        <!-- Movie Selection Modal -->
        <div class="modal" id="movieModal">
            <div class="modal-content" style="max-width: 900px;">
                <button class="close-btn" onclick="closeModal('movieModal')">&times;</button>
                
                <div class="auth-header">
                    <h2>Select Movie</h2>
                    <p>Choose what to watch together</p>
                </div>
                
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        placeholder="Search movies..." 
                        id="movieSearch"
                        oninput="searchMovies(this.value)"
                    >
                    <button class="search-btn">üîç</button>
                </div>
                
                <div class="movie-grid" id="movieGrid">
                    <div class="movie-card" onclick="selectMovie('The Matrix')">
                        <div class="movie-poster">ü§ñ</div>
                        <div class="movie-title">The Matrix</div>
                        <div class="movie-info">1999 ‚Ä¢ Action</div>
                    </div>
                    <div class="movie-card" onclick="selectMovie('Inception')">
                        <div class="movie-poster">üåÄ</div>
                        <div class="movie-title">Inception</div>
                        <div class="movie-info">2010 ‚Ä¢ Sci-Fi</div>
                    </div>
                    <div class="movie-card" onclick="selectMovie('La La Land')">
                        <div class="movie-poster">üé≠</div>
                        <div class="movie-title">La La Land</div>
                        <div class="movie-info">2016 ‚Ä¢ Musical</div>
                    </div>
                    <div class="movie-card" onclick="selectMovie('Interstellar')">
                        <div class="movie-poster">üåå</div>
                        <div class="movie-title">Interstellar</div>
                        <div class="movie-info">2014 ‚Ä¢ Sci-Fi</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container">
            <div class="header">
                <div style="flex: 0;"></div>
                <div class="header-left">
                    <div class="logo">CinemaSync</div>
                    <div class="tagline">Watch Together, Apart</div>
                </div>
                <div class="header-right">
                    <!-- Guest Actions -->
                    <div class="guest-actions" id="guestActions" style="display: flex; gap: 15px;">
                        <button class="btn btn-secondary" onclick="showAuthModal('login')">Sign In</button>
                        <button class="btn btn-primary" onclick="showAuthModal('register')">Join Now</button>
                    </div>
                    
                    <!-- User Menu -->
                    <div class="user-menu" id="userMenu" style="display: none;">
                        <div class="user-avatar" onclick="toggleUserDropdown()" id="userAvatar">
                            JD
                            <div class="notification-badge" id="notificationBadge" style="display: none;">3</div>
                        </div>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-info">
                                <h4 id="userName">John Doe</h4>
                                <p id="userEmail">john@example.com</p>
                                <div class="user-status">‚óè Online</div>
                            </div>
                            <button class="dropdown-item" onclick="showProfile()">
                                üë§ Profile Settings
                            </button>
                            <button class="dropdown-item" onclick="showNotifications()">
                                üîî Notifications
                            </button>
                            <button class="dropdown-item" onclick="showHelp()">
                                ‚ùì Help & Support
                            </button>
                            <hr style="border-color: rgba(255, 138, 101, 0.2); margin: 15px 0;">
                            <button class="dropdown-item" onclick="logout()">
                                üö™ Sign Out
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showSection('home', event)">üè† Home</button>
                <button class="nav-tab" onclick="showSection('room', event)">üé¨ Movie Room</button>
                <button class="nav-tab" onclick="showSection('discover', event)">üîç Discover</button>
                <button class="nav-tab" onclick="showSection('schedule', event)">üìÖ Schedule</button>
                <button class="nav-tab" onclick="showSection('platforms', event)">üì∫ Platforms</button>
            </div>

            <!-- Home Section -->
            <div id="home" class="content-section active">
                <div class="hero-section">
                    <h1 class="hero-title">Your Perfect Movie Experience</h1>
                    <p class="hero-subtitle">
                        Connect with friends and loved ones through the magic of cinema. Share reactions, 
                        create memories, and enjoy perfectly synchronized movie nights from anywhere in the world.
                    </p>
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <span class="feature-icon">üíï</span>
                        <h3 class="feature-title">Synchronized Viewing</h3>
                        <p class="feature-description">
                            Perfect synchronization ensures everyone watches at exactly the same moment, 
                            with automatic adjustment for network delays and buffering.
                        </p>
                    </div>

                    <div class="feature-card">
                        <span class="feature-icon">üé≠</span>
                        <h3 class="feature-title">Interactive Experience</h3>
                        <p class="feature-description">
                            Share reactions with emojis, chat in real-time, and create shared moments 
                            that make watching together feel natural and engaging.
                        </p>
                    </div>

                    <div class="feature-card">
                        <span class="feature-icon">üîê</span>
                        <h3 class="feature-title">Privacy & Security</h3>
                        <p class="feature-description">
                            End-to-end encrypted rooms with secure connections. Your viewing data 
                            and conversations stay private and protected.
                        </p>
                    </div>

                    <div class="feature-card">
                        <span class="feature-icon">üåç</span>
                        <h3 class="feature-title">Global Connection</h3>
                        <p class="feature-description">
                            Connect with anyone, anywhere. Smart timezone handling and optimized 
                            servers ensure smooth experiences across continents.
                        </p>
                    </div>

                    <div class="feature-card">
                        <span class="feature-icon">üéØ</span>
                        <h3 class="feature-title">Smart Recommendations</h3>
                        <p class="feature-description">
                            AI-powered suggestions based on group preferences help you discover 
                            the perfect movie for every occasion and mood.
                        </p>
                    </div>

                    <div class="feature-card">
                        <span class="feature-icon">‚ö°</span>
                        <h3 class="feature-title">Lightning Fast</h3>
                        <p class="feature-description">
                            Optimized for speed with instant room creation, fast loading, 
                            and responsive controls that keep the magic flowing.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Movie Room Section -->
            <div id="room" class="content-section">
                <div class="room-interface" id="roomInterface" style="display: none;">
                    <div class="room-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-wrap: wrap; gap: 15px;">
                        <div>
                            <h2 style="color: #fff; margin-bottom: 8px;">üé¨ <span id="currentRoomName">Movie Night</span></h2>
                            <p style="color: #d4b896;">Room ID: <span style="font-family: monospace; background: rgba(255, 138, 101, 0.2); padding: 4px 8px; border-radius: 6px;" id="currentRoomId">ROOM-12345</span></p>
                        </div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-secondary" onclick="showModal('movieModal')">üìΩÔ∏è Select Movie</button>
                            <button class="btn btn-secondary" onclick="inviteUsers()">‚ûï Invite</button>
                            <button class="btn btn-secondary" onclick="leaveRoom()">üö™ Leave</button>
                        </div>
                    </div>

                    <div class="room-participants" style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 25px;">
                        <div style="display: flex; align-items: center; gap: 8px; background: rgba(255, 138, 101, 0.15); padding: 10px 15px; border-radius: 25px;">
                            <div class="participant-avatar online">YO</div>
                            <span style="color: #fff; font-weight: 500;">You</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; background: rgba(255, 138, 101, 0.15); padding: 10px 15px; border-radius: 25px;">
                            <div class="participant-avatar online">SA</div>
                            <span style="color: #fff; font-weight: 500;">Sarah</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; background: rgba(255, 138, 101, 0.08); padding: 10px 15px; border-radius: 25px; opacity: 0.6;">
                            <div class="participant-avatar">MI</div>
                            <span style="color: #d4b896; font-weight: 500;">Mike (away)</span>
                        </div>
                    </div>

                    <div class="video-container" id="videoContainer">
                        <div class="video-placeholder">
                            <div style="text-align: center;">
                                <div style="font-size: 4rem; margin-bottom: 20px;">üé•</div>
                                <h3 style="color: #fff; margin-bottom: 10px;">Ready to Watch</h3>
                                <p style="color: #d4b896;">Select a movie to start your synchronized viewing experience</p>
                                <button class="btn btn-primary" style="margin-top: 20px;" onclick="showModal('movieModal')">
                                    üìΩÔ∏è Choose Movie
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="video-controls">
                        <button class="control-btn" id="playBtn" onclick="togglePlay()">‚ñ∂Ô∏è Play</button>
                        <button class="control-btn" onclick="seekBackward()">‚è™ -10s</button>
                        <button class="control-btn" onclick="seekForward()">‚è© +10s</button>
                        <button class="control-btn active" onclick="toggleSync()">üîÑ Sync</button>
                        <button class="control-btn" onclick="toggleFullscreen()">üñºÔ∏è Fullscreen</button>
                        <button class="control-btn" onclick="toggleTheaterMode()">üé≠ Theater</button>
                    </div>

                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div style="color: #888; font-size: 0.9rem; text-align: center; padding: 30px 20px;">
                                üí¨ Chat messages will appear here. Share your reactions and thoughts!
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <input 
                                type="text" 
                                class="chat-input" 
                                placeholder="Share your thoughts..." 
                                id="chatInput"
                                onkeypress="handleChatKeypress(event)"
                            >
                            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                        </div>
                    </div>
                </div>

                <div id="roomLanding" style="text-align: center; padding: 60px 20px;">
                    <h2 style="color: #fff; margin-bottom: 20px; font-size: 2.5rem;">üé¨ Movie Rooms</h2>
                    <p style="color: #d4b896; margin-bottom: 40px; font-size: 1.2rem;">Create or join rooms to watch movies with friends</p>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 50px;">
                        <button class="btn btn-primary" onclick="showModal('createRoomModal')" style="padding: 18px 32px; font-size: 1.1rem;">
                            üÜï Create Room
                        </button>
                        <button class="btn btn-secondary" onclick="showJoinRoomModal()" style="padding: 18px 32px; font-size: 1.1rem;">
                            üîó Join Room
                        </button>
                        <button class="btn btn-secondary" onclick="showPublicRooms()" style="padding: 18px 32px; font-size: 1.1rem;">
                            üåç Browse Public
                        </button>
                    </div>

                    <div class="room-list" id="roomList">
                        <div class="room-card" onclick="quickJoinRoom('DEMO-ROOM')">
                            <h3>üçø Friday Night Movies</h3>
                            <div class="room-info">
                                <span>3/8 participants</span>
                                <span>Public</span>
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar online">AL</div>
                                <div class="participant-avatar online">BO</div>
                                <div class="participant-avatar">CA</div>
                            </div>
                            <p style="color: #d4b896; font-size: 0.9rem;">Currently watching: The Avengers</p>
                        </div>

                        <div class="room-card" onclick="quickJoinRoom('ROMANCE-NIGHT')">
                            <h3>üíï Date Night</h3>
                            <div class="room-info">
                                <span>2/2 participants</span>
                                <span>Private</span>
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar online">JO</div>
                                <div class="participant-avatar online">SA</div>
                            </div>
                            <p style="color: #d4b896; font-size: 0.9rem;">Ready to start</p>
                        </div>

                        <div class="room-card" onclick="quickJoinRoom('HORROR-FANS')">
                            <h3>üëª Horror Marathon</h3>
                            <div class="room-info">
                                <span>5/16 participants</span>
                                <span>Friends</span>
                            </div>
                            <div class="room-participants">
                                <div class="participant-avatar online">DA</div>
                                <div class="participant-avatar online">LI</div>
                                <div class="participant-avatar online">MA</div>
                                <div class="participant-avatar">TO</div>
                                <div class="participant-avatar">AN</div>
                            </div>
                            <p style="color: #d4b896; font-size: 0.9rem;">Next: The Conjuring</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Discover Section -->
            <div id="discover" class="content-section">
                <div style="padding: 20px 0;">
                    <h2 style="text-align: center; color: #fff; margin-bottom: 15px; font-size: 2.5rem;">üîç Discover Movies</h2>
                    <p style="text-align: center; color: #d4b896; margin-bottom: 40px; font-size: 1.2rem;">
                        Find your next perfect movie night with personalized recommendations
                    </p>

                    <div class="search-container">
                        <input 
                            type="text" 
                            class="search-input" 
                            placeholder="Search movies, genres, actors..." 
                            id="discoverSearch"
                            oninput="handleDiscoverSearch(this.value)"
                        >
                        <button class="search-btn" onclick="performSearch()">üîç</button>
                    </div>

                    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px;">
                        <button class="btn btn-secondary category-btn active" onclick="filterByCategory('trending', event)">üî• Trending</button>
                        <button class="btn btn-secondary category-btn" onclick="filterByCategory('romance', event)">üíï Romance</button>
                        <button class="btn btn-secondary category-btn" onclick="filterByCategory('action', event)">‚ö° Action</button>
                        <button class="btn btn-secondary category-btn" onclick="filterByCategory('comedy', event)">üòÇ Comedy</button>
                        <button class="btn btn-secondary category-btn" onclick="filterByCategory('horror', event)">üëª Horror</button>
                        <button class="btn btn-secondary category-btn" onclick="filterByCategory('scifi', event)">üöÄ Sci-Fi</button>
                    </div>

                    <div class="movie-grid" id="discoverGrid">
                        <div class="movie-card" onclick="showMovieDetails('The Batman')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #1a1a1a, #333); color: #ffd54f;">ü¶á</div>
                            <div class="movie-title">The Batman</div>
                            <div class="movie-info">2022 ‚Ä¢ Action ‚Ä¢ 4.8‚≠ê</div>
                        </div>
                        <div class="movie-card" onclick="showMovieDetails('Dune')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #8B4513, #CD853F); color: #ffd54f;">üèúÔ∏è</div>
                            <div class="movie-title">Dune</div>
                            <div class="movie-info">2021 ‚Ä¢ Sci-Fi ‚Ä¢ 4.7‚≠ê</div>
                        </div>
                        <div class="movie-card" onclick="showMovieDetails('Spider-Verse')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #FF4500, #FF6347); color: #fff;">üï∑Ô∏è</div>
                            <div class="movie-title">Spider-Verse</div>
                            <div class="movie-info">2018 ‚Ä¢ Animation ‚Ä¢ 4.9‚≠ê</div>
                        </div>
                        <div class="movie-card" onclick="showMovieDetails('Parasite')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #2F4F4F, #696969); color: #ffd54f;">üè†</div>
                            <div class="movie-title">Parasite</div>
                            <div class="movie-info">2019 ‚Ä¢ Thriller ‚Ä¢ 4.8‚≠ê</div>
                        </div>
                        <div class="movie-card" onclick="showMovieDetails('La La Land')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #FFD700, #FFA500); color: #8B0000;">üé≠</div>
                            <div class="movie-title">La La Land</div>
                            <div class="movie-info">2016 ‚Ä¢ Musical ‚Ä¢ 4.6‚≠ê</div>
                        </div>
                        <div class="movie-card" onclick="showMovieDetails('Mad Max')">
                            <div class="movie-poster" style="background: linear-gradient(135deg, #8B4513, #D2691E); color: #ff4444;">üöó</div>
                            <div class="movie-title">Mad Max: Fury Road</div>
                            <div class="movie-info">2015 ‚Ä¢ Action ‚Ä¢ 4.7‚≠ê</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Section -->
            <div id="schedule" class="content-section">
                <div style="padding: 20px 0;">
                    <h2 style="text-align: center; color: #fff; margin-bottom: 15px; font-size: 2.5rem;">üìÖ Movie Schedule</h2>
                    <p style="text-align: center; color: #d4b896; margin-bottom: 50px; font-size: 1.2rem;">
                        Plan and manage your movie nights with friends
                    </p>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px;">
                        <button class="btn btn-primary" onclick="scheduleMovie()" style="padding: 15px 25px;">
                            ‚ûï Schedule Movie
                        </button>
                        <button class="btn btn-secondary" onclick="viewCalendar()" style="padding: 15px 25px;">
                            üìÜ View Calendar
                        </button>
                        <button class="btn btn-secondary" onclick="manageReminders()" style="padding: 15px 25px;">
                            üîî Reminders
                        </button>
                    </div>

                    <div class="feature-grid">
                        <div class="feature-card" style="cursor: pointer;" onclick="scheduleMovie()">
                            <span class="feature-icon">üìÜ</span>
                            <h3 class="feature-title">Smart Scheduling</h3>
                            <p class="feature-description">
                                AI-powered scheduling finds the best time for all participants across different time zones.
                            </p>
                            <button class="btn btn-primary" style="margin-top: 20px; width: 100%;">
                                Schedule Now
                            </button>
                        </div>

                        <div class="feature-card" style="cursor: pointer;" onclick="viewUpcoming()">
                            <span class="feature-icon">‚è∞</span>
                            <h3 class="feature-title">Upcoming Events</h3>
                            <p class="feature-description">
                                View all your scheduled movie nights and get reminded before they start.
                            </p>
                            <div style="margin-top: 15px; padding: 15px; background: rgba(255, 138, 101, 0.1); border-radius: 10px;">
                                <div style="color: #fff; font-weight: 600; margin-bottom: 5px;">Tonight at 8 PM</div>
                                <div style="color: #d4b896; font-size: 0.9rem;">Horror Night with Friends</div>
                            </div>
                        </div>

                        <div class="feature-card" style="cursor: pointer;" onclick="connectCalendar()">
                            <span class="feature-icon">üîó</span>
                            <h3 class="feature-title">Calendar Integration</h3>
                            <p class="feature-description">
                                Sync with Google Calendar, Outlook, or Apple Calendar for seamless planning.
                            </p>
                            <button class="btn btn-secondary" style="margin-top: 20px; width: 100%;">
                                Connect Calendar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Platforms Section -->
            <div id="platforms" class="content-section">
                <div style="padding: 20px 0;">
                    <h2 style="text-align: center; color: #fff; margin-bottom: 15px; font-size: 2.5rem;">üì∫ Streaming Platforms</h2>
                    <p style="text-align: center; color: #d4b896; margin-bottom: 50px; font-size: 1.2rem;">
                        Connect your streaming accounts for seamless movie watching
                    </p>

                    <div class="platform-grid">
                        <div class="platform-card">
                            <div class="platform-logo netflix">N</div>
                            <div class="platform-name">Netflix</div>
                            <div class="platform-status status-connected">‚úì Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Access to 15,000+ movies and shows</p>
                            <button class="btn btn-secondary" style="width: 100%;">
                                Manage Connection
                            </button>
                        </div>

                        <div class="platform-card">
                            <div class="platform-logo disney">D+</div>
                            <div class="platform-name">Disney+</div>
                            <div class="platform-status status-disconnected">‚ö† Not Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Marvel, Star Wars, and Disney classics</p>
                            <button class="btn btn-primary" style="width: 100%;">
                                Connect Account
                            </button>
                        </div>

                        <div class="platform-card">
                            <div class="platform-logo hulu">H</div>
                            <div class="platform-name">Hulu</div>
                            <div class="platform-status status-connected">‚úì Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Current TV shows and movies</p>
                            <button class="btn btn-secondary" style="width: 100%;">
                                Manage Connection
                            </button>
                        </div>

                        <div class="platform-card">
                            <div class="platform-logo amazon">P</div>
                            <div class="platform-name">Prime Video</div>
                            <div class="platform-status status-disconnected">‚ö† Not Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Amazon Originals and blockbusters</p>
                            <button class="btn btn-primary" style="width: 100%;">
                                Connect Account
                            </button>
                        </div>

                        <div class="platform-card">
                            <div class="platform-logo hbo">HBO</div>
                            <div class="platform-name">HBO Max</div>
                            <div class="platform-status status-disconnected">‚ö† Not Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Premium content and HBO series</p>
                            <button class="btn btn-primary" style="width: 100%;">
                                Connect Account
                            </button>
                        </div>

                        <div class="platform-card">
                            <div class="platform-logo youtube">YT</div>
                            <div class="platform-name">YouTube</div>
                            <div class="platform-status status-connected">‚úì Connected</div>
                            <p style="color: #d4b896; font-size: 0.9rem; margin-bottom: 20px;">Free movies and premium rentals</p>
                            <button class="btn btn-secondary" style="width: 100%;">
                                Manage Connection
                            </button>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 50px; padding: 40px; background: rgba(255, 138, 101, 0.08); border-radius: 20px; border: 1px solid rgba(255, 138, 101, 0.15);">
                        <h3 style="color: #fff; margin-bottom: 20px; font-size: 1.5rem; text-shadow: 0 0 20px rgba(255, 138, 101, 0.8), 0 0 40px rgba(255, 213, 79, 0.5);">üîê Privacy & Security</h3>
                        <p style="color: #d4b896; line-height: 1.7; max-width: 700px; margin: 0 auto;">
                            We use secure OAuth connections to link your streaming accounts. We never store your login credentials 
                            or access your personal data. All connections can be revoked at any time from your account settings.
                            Your viewing sessions are encrypted end-to-end for maximum privacy.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Application State
        let currentUser = null;
        let currentRoom = null;
        let isPlaying = false;
        let isSynced = true;
        let introComplete = false;
        let selectedMovie = null;
        let chatMessages = [];
        let notifications = [];

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            createFloatingEmojis();
            startEnhancedIntro();
        });

        // Enhanced Intro Sequence
        function startEnhancedIntro() {
            setTimeout(() => {
                if (!introComplete) {
                    completeIntro();
                }
            }, 5000);
        }

        function skipIntro() {
            completeIntro();
        }

        function completeIntro() {
            if (introComplete) return;
            
            introComplete = true;
            const introPage = document.getElementById('introPage');
            const mainApp = document.getElementById('mainApp');
            
            introPage.classList.add('fade-out');
            
            setTimeout(() => {
                introPage.classList.add('hidden');
                mainApp.classList.add('show');
                initializeApp();
                showWelcomeMessage();
            }, 1500);
        }

        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numStars = 150;
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.animationDuration = (3 + Math.random() * 2) + 's';
                starsContainer.appendChild(star);
            }
        }

        function createFloatingEmojis() {
            const container = document.getElementById('floatingEmojis');
            const emojis = ['üé¨', 'üçø', 'üé≠', 'üìΩÔ∏è', 'üé™', 'üåü'];
            
            for (let i = 0; i < 8; i++) {
                const emoji = document.createElement('div');
                emoji.className = 'floating-emoji';
                emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                emoji.style.left = Math.random() * 100 + '%';
                emoji.style.animationDelay = Math.random() * 8 + 's';
                container.appendChild(emoji);
            }
        }

        function initializeApp() {
            console.log('üé¨ CinemaSync Enhanced - Ready!');
            addDemoHelper();
        }

        function showWelcomeMessage() {
            setTimeout(() => {
                showToast('Welcome to CinemaSync! üé¨ Ready to watch together?', 'success', 6000);
            }, 1000);
        }

        // Enhanced Toast System
        function showToast(message, type = 'info', duration = 4000) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                info: '‚ÑπÔ∏è',
                warning: '‚ö†Ô∏è'
            };
            
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-icon">${icons[type] || icons.info}</span>
                    <span class="toast-text">${message}</span>
                    <button class="toast-close" onclick="removeToast(this)">√ó</button>
                </div>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                if (container.contains(toast)) {
                    removeToast(toast.querySelector('.toast-close'));
                }
            }, duration);
        }

        function removeToast(closeBtn) {
            const toast = closeBtn.closest('.toast');
            toast.style.animation = 'slideOut 0.3s ease forwards';
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }

        // Enhanced Authentication
        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const button = document.getElementById('loginBtn');
            
            if (!email || !password) {
                showToast('Please enter both email and password', 'error');
                return;
            }
            
            button.innerHTML = '<span class="loading-spinner"></span>Signing In...';
            button.disabled = true;
            
            try {
                await simulateDelay(1200);
                
                if (email === 'demo@cinemasync.com' && password === 'demo123' || 
                    (email.includes('@') && password.length >= 6)) {
                    
                    currentUser = {
                        id: 'user_' + Date.now(),
                        name: email === 'demo@cinemasync.com' ? 'Demo User' : 'Movie Lover',
                        email: email
                    };
                    
                    showToast('Welcome back! üé¨ Ready for movie night?', 'success');
                    closeModal('authModal');
                    updateUIForUser();
                    
                } else {
                    throw new Error('Invalid credentials. Try demo@cinemasync.com / demo123');
                }
                
            } catch (error) {
                showToast(error.message, 'error');
            } finally {
                button.innerHTML = 'Sign In';
                button.disabled = false;
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const button = document.getElementById('registerBtn');
            
            if (!name || !email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (!email.includes('@')) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            button.innerHTML = '<span class="loading-spinner"></span>Creating Account...';
            button.disabled = true;
            
            try {
                await simulateDelay(1500);
                
                currentUser = {
                    id: 'user_' + Date.now(),
                    name: name,
                    email: email
                };
                
                showToast(`Welcome to CinemaSync, ${name}! üéâ`, 'success');
                closeModal('authModal');
                updateUIForUser();
                
            } catch (error) {
                showToast('Registration failed. Please try again.', 'error');
            } finally {
                button.innerHTML = 'Create Account';
                button.disabled = false;
            }
        }

        function logout() {
            currentUser = null;
            currentRoom = null;
            selectedMovie = null;
            updateUIForGuest();
            showToast('Signed out successfully. See you next time! üëã', 'info');
            closeUserDropdown();
        }

        // Enhanced UI Updates
        function updateUIForUser() {
            const guestActions = document.getElementById('guestActions');
            const userMenu = document.getElementById('userMenu');
            const userAvatar = document.getElementById('userAvatar');
            const userName = document.getElementById('userName');
            const userEmail = document.getElementById('userEmail');
            const badge = document.getElementById('notificationBadge');
            
            guestActions.style.display = 'none';
            userMenu.style.display = 'block';
            
            if (currentUser) {
                const initials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                userAvatar.textContent = initials;
                userName.textContent = currentUser.name;
                userEmail.textContent = currentUser.email;
                
                // Show notification badge
                notifications = [
                    'Welcome to CinemaSync!',
                    'Your first movie night awaits',
                    'Invite friends to join you'
                ];
                badge.style.display = 'block';
                badge.textContent = notifications.length;
            }
        }

        function updateUIForGuest() {
            const guestActions = document.getElementById('guestActions');
            const userMenu = document.getElementById('userMenu');
            
            guestActions.style.display = 'flex';
            userMenu.style.display = 'none';
            
            hideRoomInterface();
        }

        // Room Management
        async function handleCreateRoom(event) {
            event.preventDefault();
            
            if (!currentUser) {
                showToast('Please sign in to create a room', 'error');
                return;
            }
            
            const roomName = document.getElementById('roomName').value.trim();
            const maxParticipants = document.getElementById('maxParticipants').value;
            const roomPrivacy = document.getElementById('roomPrivacy').value;
            
            if (!roomName) {
                showToast('Please enter a room name', 'error');
                return;
            }
            
            try {
                await simulateDelay(800);
                
                const roomId = 'ROOM-' + Math.random().toString(36).substr(2, 5).toUpperCase();
                currentRoom = {
                    id: roomId,
                    name: roomName,
                    maxParticipants: parseInt(maxParticipants),
                    privacy: roomPrivacy,
                    participants: [currentUser],
                    createdBy: currentUser.id,
                    createdAt: new Date()
                };
                
                showToast(`Room "${roomName}" created successfully! üéâ`, 'success');
                closeModal('createRoomModal');
                showRoomInterface(currentRoom);
                
            } catch (error) {
                showToast('Failed to create room. Please try again.', 'error');
            }
        }

        function showJoinRoomModal() {
            if (!currentUser) {
                showToast('Please sign in to join a room', 'error');
                return;
            }
            
            const roomCode = prompt('üîó Enter room code:');
            if (roomCode && roomCode.length > 3) {
                joinRoom(roomCode);
            } else if (roomCode) {
                showToast('Invalid room code format', 'error');
            }
        }

        async function joinRoom(roomCode) {
            try {
                await simulateDelay(600);
                
                const mockRoom = {
                    id: roomCode,
                    name: 'Shared Movie Experience',
                    participants: [
                        currentUser,
                        { id: 'friend1', name: 'Movie Buddy', email: 'friend@example.com' }
                    ],
                    maxParticipants: 8,
                    privacy: 'friends'
                };
                
                currentRoom = mockRoom;
                showToast('Successfully joined the room! üé¨', 'success');
                showRoomInterface(mockRoom);
                
            } catch (error) {
                showToast('Failed to join room. Please check the code.', 'error');
            }
        }

        function quickJoinRoom(roomId) {
            if (!currentUser) {
                showToast('Please sign in to join rooms', 'error');
                return;
            }
            
            joinRoom(roomId);
        }

        function showRoomInterface(room) {
            const landing = document.getElementById('roomLanding');
            const interface = document.getElementById('roomInterface');
            const roomName = document.getElementById('currentRoomName');
            const roomIdElement = document.getElementById('currentRoomId');
            
            landing.style.display = 'none';
            interface.style.display = 'block';
            
            roomName.textContent = room.name;
            roomIdElement.textContent = room.id;
            
            showSection('room');
            
            // Add welcome message to chat
            addChatMessage('System', `Welcome to ${room.name}! üé¨`);
        }

        function hideRoomInterface() {
            const landing = document.getElementById('roomLanding');
            const interface = document.getElementById('roomInterface');
            
            landing.style.display = 'block';
            interface.style.display = 'none';
        }

        function leaveRoom() {
            if (currentRoom) {
                showToast(`Left "${currentRoom.name}" üëã`, 'info');
                currentRoom = null;
                selectedMovie = null;
                hideRoomInterface();
                clearChat();
            }
        }

        // Video Controls
        function togglePlay() {
            const playBtn = document.getElementById('playBtn');
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                playBtn.innerHTML = '‚è∏Ô∏è Pause';
                playBtn.classList.add('active');
                showToast('‚ñ∂Ô∏è Playback started for everyone', 'info', 2000);
                if (selectedMovie) {
                    updateVideoPlaceholder(`Now playing: ${selectedMovie}`);
                }
            } else {
                playBtn.innerHTML = '‚ñ∂Ô∏è Play';
                playBtn.classList.remove('active');
                showToast('‚è∏Ô∏è Playback paused for everyone', 'info', 2000);
            }
        }

        function seekBackward() {
            showToast('‚è™ Rewound 10 seconds', 'info', 1500);
        }

        function seekForward() {
            showToast('‚è© Fast forwarded 10 seconds', 'info', 1500);
        }

        function toggleSync() {
            isSynced = !isSynced;
            const syncBtn = event.target;
            
            if (isSynced) {
                syncBtn.classList.add('active');
                showToast('üîÑ Synchronization enabled', 'success', 2000);
            } else {
                syncBtn.classList.remove('active');
                showToast('üîÑ Synchronization disabled', 'warning', 2000);
            }
        }

        function toggleFullscreen() {
            showToast('üñºÔ∏è Fullscreen toggled', 'info', 1500);
        }

        function toggleTheaterMode() {
            showToast('üé≠ Theater mode toggled', 'info', 1500);
        }

        // Movie Selection
        function selectMovie(movieTitle) {
            selectedMovie = movieTitle;
            updateVideoPlaceholder(`Selected: ${movieTitle}`);
            closeModal('movieModal');
            showToast(`üé¨ "${movieTitle}" selected for viewing`, 'success');
        }

        function updateVideoPlaceholder(text) {
            const container = document.getElementById('videoContainer');
            container.innerHTML = `
                <div class="video-placeholder">
                    <div style="text-align: center;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üé¨</div>
                        <h3 style="color: #fff; margin-bottom: 10px;">${text}</h3>
                        <p style="color: #d4b896;">Synchronized viewing experience active</p>
                        ${!isPlaying ? '<button class="btn btn-primary" style="margin-top: 20px;" onclick="togglePlay()">‚ñ∂Ô∏è Start Watching</button>' : ''}
                    </div>
                </div>
            `;
        }

        function showMovieDetails(movieTitle) {
            showToast(`üìΩÔ∏è Viewing details for "${movieTitle}"`, 'info');
            // In a real app, this would show a detailed modal
        }

        function searchMovies(query) {
            if (query.length > 2) {
                showToast(`üîç Searching for "${query}"...`, 'info', 1500);
            }
        }

        // Chat System
        function addChatMessage(sender, message, isSystem = false) {
            const messagesContainer = document.getElementById('chatMessages');
            
            // Clear placeholder if this is the first message
            if (chatMessages.length === 0) {
                messagesContainer.innerHTML = '';
            }
            
            const messageElement = document.createElement('div');
            messageElement.style.marginBottom = '12px';
            messageElement.style.padding = '10px';
            messageElement.style.borderRadius = '10px';
            messageElement.style.backgroundColor = isSystem ? 'rgba(255, 138, 101, 0.1)' : 'rgba(255, 138, 101, 0.05)';
            
            const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            messageElement.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                    <strong style="color: ${isSystem ? '#ffd54f' : '#ff8a65'};">${sender}</strong>
                    <span style="color: #888; font-size: 0.8rem;">${timestamp}</span>
                </div>
                <div style="color: #fff;">${message}</div>
            `;
            
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            chatMessages.push({ sender, message, timestamp, isSystem });
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message && currentUser) {
                addChatMessage(currentUser.name, message);
                input.value = '';
                
                // Simulate response from other participant
                setTimeout(() => {
                    const responses = [
                        "Great choice! üëç",
                        "I love this part! üòç",
                        "This is so good! üî•",
                        "Haha that was funny! üòÇ",
                        "What do you think happens next? ü§î"
                    ];
                    addChatMessage('Sarah', responses[Math.floor(Math.random() * responses.length)]);
                }, Math.random() * 3000 + 1000);
            }
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function clearChat() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '<div style="color: #888; font-size: 0.9rem; text-align: center; padding: 30px 20px;">üí¨ Chat messages will appear here</div>';
            chatMessages = [];
        }

        // Navigation and Sections
        function showSection(sectionId, event) {
            // Check if user needs to be authenticated for certain sections
            if (['room', 'schedule', 'platforms'].includes(sectionId) && !currentUser) {
                showToast('Please sign in to access this feature', 'warning');
                showAuthModal('login');
                return;
            }
            
            // Update active states
            const sections = document.querySelectorAll('.content-section');
            const tabs = document.querySelectorAll('.nav-tab');
            
            sections.forEach(section => section.classList.remove('active'));
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            if (event) {
                event.target.classList.add('active');
            } else {
                // Find and activate the corresponding tab
                const correspondingTab = Array.from(tabs).find(tab => 
                    tab.onclick && tab.onclick.toString().includes(sectionId)
                );
                if (correspondingTab) {
                    correspondingTab.classList.add('active');
                }
            }
        }

        // Discovery and Search
        function filterByCategory(category, event) {
            const buttons = document.querySelectorAll('.category-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            showToast(`üîç Showing ${category} movies`, 'info', 1500);
        }

        function handleDiscoverSearch(query) {
            if (query.length > 2) {
                showToast(`üîç Searching for "${query}"...`, 'info', 1000);
            }
        }

        function performSearch() {
            const query = document.getElementById('discoverSearch').value;
            if (query.trim()) {
                showToast(`üîç Searching for "${query}"...`, 'info');
            }
        }

        // Modal Management
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function showAuthModal(type = 'login') {
            const modal = document.getElementById('authModal');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            
            if (type === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
            }
            
            modal.classList.add('active');
        }

        function closeAuthModal() {
            closeModal('authModal');
        }

        function switchToLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        }

        function switchToRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        // User Menu
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        function closeUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.remove('active');
        }

        // Feature Functions (Placeholders)
        function inviteUsers() {
            const inviteCode = currentRoom ? currentRoom.id : 'DEMO-ROOM';
            navigator.clipboard.writeText(`Join my movie room on CinemaSync: ${inviteCode}`)
                .then(() => showToast('üìã Invite link copied to clipboard!', 'success'))
                .catch(() => showToast('üíå Invite your friends with room code: ' + inviteCode, 'info'));
        }

        function scheduleMovie() {
            showToast('üìÖ Movie scheduling coming soon!', 'info');
        }

        function viewCalendar() {
            showToast('üìÜ Calendar view coming soon!', 'info');
        }

        function manageReminders() {
            showToast('üîî Reminder management coming soon!', 'info');
        }

        function viewUpcoming() {
            showToast('‚è∞ Upcoming events feature coming soon!', 'info');
        }

        function connectCalendar() {
            showToast('üîó Calendar integration coming soon!', 'info');
        }

        function showPublicRooms() {
            showToast('üåç Browse public rooms feature coming soon!', 'info');
        }

        function showProfile() {
            closeUserDropdown();
            showToast('üë§ Profile settings coming soon!', 'info');
        }

        function showNotifications() {
            closeUserDropdown();
            showToast(`üîî You have ${notifications.length} notifications`, 'info');
        }

        function showHelp() {
            closeUserDropdown();
            showToast('‚ùì Help & Support coming soon!', 'info');
        }

        // Utility Functions
        async function simulateDelay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function addDemoHelper() {
            setTimeout(() => {
                if (!currentUser) {
                    const guestActions = document.getElementById('guestActions');
                    const existingDemo = document.querySelector('.demo-btn');
                    if (existingDemo) return;
                    
                    const demoBtn = document.createElement('button');
                    demoBtn.className = 'btn btn-secondary demo-btn';
                    demoBtn.style.fontSize = '0.85rem';
                    demoBtn.style.padding = '10px 16px';
                    demoBtn.innerHTML = 'üé¨ Try Demo';
                    demoBtn.onclick = quickDemoLogin;
                    guestActions.appendChild(demoBtn);
                    
                    setTimeout(() => {
                        showToast('üé≠ Try the demo: demo@cinemasync.com / demo123', 'info', 8000);
                    }, 3000);
                }
            }, 2000);
        }

        function quickDemoLogin() {
            document.getElementById('loginEmail').value = 'demo@cinemasync.com';
            document.getElementById('loginPassword').value = 'demo123';
            showAuthModal('login');
            
            setTimeout(() => {
                showToast('‚ú® Demo credentials loaded! Click Sign In to continue.', 'info');
            }, 100);
        }

        // Event Listeners
        document.addEventListener('click', function(event) {
            const userMenu = document.getElementById('userMenu');
            if (userMenu && !userMenu.contains(event.target)) {
                closeUserDropdown();
            }
            
            // Close modals when clicking outside
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        });

        document.addEventListener('keydown', function(event) {
            // Skip intro on any key press during intro
            if (!introComplete && event.key) {
                completeIntro();
                return;
            }
            
            if (event.key === 'Escape') {
                // Close any open modals
                document.querySelectorAll('.modal.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                closeUserDropdown();
            }
        });

        // Initialize enhanced features
        function initializeEnhancedFeatures() {
            // Add smooth scrolling
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Add connection status monitoring
            window.addEventListener('online', () => {
                showToast('üåê Connection restored', 'success', 2000);
            });
            
            window.addEventListener('offline', () => {
                showToast('üåê Connection lost', 'warning', 2000);
            });
        }

        // Start enhanced features after intro
        setTimeout(initializeEnhancedFeatures, 2000);

        console.log('üé¨ CinemaSync Enhanced - Loaded successfully!');
    </script>
</body>
</html>

<div style="color:#fff; font-weight:600; text-align:center; padding:10px; text-shadow: 0 0 6px #ff0000, 0 0 12px #ff7f00, 0 0 18px #ffff00, 0 0 24px #00ff00, 0 0 30px #0000ff, 0 0 36px #4b0082, 0 0 42px #8f00ff;">created by abhinav dufare</div>
